<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PG</title>
  <link rel="stylesheet" href="normalize.css">
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
















<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <h1 class="text-center">PG-ification</h1>
      <p class="text-center">Upon entering text and hitting <code>spacebar</code> or <code>enter</code>, all user input will be transformed into the boring text of the Communist Manifesto. Any content whatsoever (regardless of perceived levels of immorality and general offensiveness) will undergo translation in order to guarantee that any perverted or gratuitous story will be converted into the false but inert (and therefore, relatively harmless) utterances of Karl Marx.</p>
    </div>
  </div>

  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <textarea name="name"></textarea>
      <p class="tiny">e.g., try typing "the woman with greasy legs stumbled into the lesbian bar carrying two pounds of meat and a freshly-printed speeding ticket."</p>
      <button class="clear">Clear Input</button>
    </div>
  </div>
</div>

<script src="jquery-2.1.4.min.js" charset="utf-8"></script>
<script src="communist.js"></script>

<script>

  communistArray = communist.split(' ');
  //adds a space after every element in the array
  //but this also causes length property to come out wrong
  //(this is compensated for later on)
  for(var i = 0; i < communistArray.length; i++){
    communistArray[i] = communistArray[i] + " ";
  }

  var newArray = [];
  var item;
  var items = [];
  var lengthOfContent;
  var totalLength;
  var lengthOfPaste;

  $('textarea').keyup(function(e){

      //detect spacebar or enter key
     if(e.keyCode == 32 || e.keyCode == 13){

         item = communistArray.splice(0, 1).toString();
         newArray.push(item);
         $('textarea').val(newArray.join(''));
        //  lengthOfContent = $('textarea').val().length;
         lengthOfContent = $('textarea').val().split(' ').length - 1;

     }
  });


  //deal with pasting events
  $('textarea').on('paste', function() {
    // console.log('text pasted!');
    lengthOfPaste = $('textarea').val().split(' ').length - 1;
    items = communistArray.splice(0, lengthOfPaste).toString();
    // newArray.push(items);
    // $('textarea').val(newArray.join(''));
  });





  //clear textarea when button is clicked, empty newArray, reset the communistArray
  $('.clear').click(function(){
    $('textarea').val('');
    newArray = [];

    //this will reset the array
    communistArray = communist.split(' ');
    for(var i = 0; i < communistArray.length; i++){
      communistArray[i] = communistArray[i] + " ";
    }
  });


</script>
</body>
</html>
